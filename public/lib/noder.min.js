/*
 * Noder-js 1.1.0-rc0 - 30 Oct 2013
 * https://github.com/ariatemplates/noder
 * Copyright 2009-2013 Amadeus s.a.s.
 * Licensed under the Apache License, Version 2.0.
 */
(function(n,e,t){"use strict";var r,i,o,u,a,c,s,l,f,d,h,v,p,m,g,y,j,x,w,E,M,b,S,q;return function(){var n=Object.prototype.toString,e=function(e){return"string"==typeof e||"[object String]"===n.call(e)},t=Array.isArray||function(e){return"[object Array]"===n.call(e)},i=function(n){return"function"==typeof n},o=function(e){return e?"[object Object]"===n.call(e):!1};r={isFunction:i,isArray:t,isString:e,isPlainObject:o}}(),function(){var n=function(e,t,i){for(var o in t)if(t.hasOwnProperty(o)){var u,a=t[o];i&&r.isPlainObject(a)&&r.isPlainObject(u=e[o])?n(u,a,i):e[o]=a}};i=n}(),function(){var e=n.setTimeout;o=function(n){e(n,0)}}(),u=function(n){o(function(){throw n.logDetails&&n.logDetails(),n})},function(){var n=[],e=!1,t=function(n,e,t){for(;n.length>0;){var r=n.shift();try{r.apply(t,e)}catch(i){u(i)}}},r=function(){e=!0;try{t(n,[])}finally{e=!1}},i=function(t){0!==n.length||e||o(r),n.push(t)};a={syncTick:r,nextTick:i,nextTickApply:function(n,e,r){n&&n.length>0&&i(function(){t(n,e,r)})},syncApply:t}}(),function(){var n=r.isFunction,e=Array.prototype.concat,t=function(e,t,r){if(e){var i=e.thenSync||e.then;if(n(i))return i.call(e,t,r),void 0}t(e)},o=function(n,e){return function(){try{var r=n.apply(null,arguments);t(r,e.resolve,e.reject)}catch(i){e.reject(i)}finally{n=null,e=null}}},s=function(){},l=function(){var n=new s,t=new s,r="pending",o=null,u={},c=function(n,i,c){var s=function(i,a){t[n+i]=function(){var n;return"pending"===r?(n=u[c]||[],u[c]=e.apply(n,arguments)):r===c&&(n=e.apply([],arguments),a(n,o)),this}};s("",a.nextTickApply),s("Sync",a.syncApply),t[i]=function(){if("pending"===r){o=arguments,r=c;var n=u[c];u=null,a.nextTickApply(n,o)}}};return c("done","resolve","resolved"),c("fail","reject","rejected"),t.state=function(){return r},t.promise=function(){return t},i(n,t),n},f=l.prototype=s.prototype={end:function(){return this.thenSync(l.empty,u)}},d=function(e){var t="done"+e,r="fail"+e;f["then"+e]=function(e,i){var u=l();return this[t](n(e)?o(e,u):u.resolve),this[r](n(i)?o(i,u):u.reject),u.promise()},f["always"+e]=function(){return this[t].apply(this,arguments),this[r].apply(this,arguments),this}};d("Sync"),d("");var h=l();h.resolve(),l.done=h.promise(),l.empty=function(){},l.noop=function(){return h};var v=function(n,e){return function(t){if(n){var r=n.array;if(r[e]=t,n.counter--,!n.counter){var i=n.promise;n.array=null,n.promise=null,i.resolve.apply(i,r)}n=null}}};l.when=function(){var n=e.apply([],arguments);if(!n.length)return l.done;for(var r=l(),i=r.reject,o={promise:r,counter:n.length,array:n},u=0,a=n.length;a>u;u++)t(n[u],v(o,u),i);return r.promise()},c=l}(),function(){var e=n.document||{},t=function(){if("loading"==e.readyState||"interactive"==e.readyState){var n=e.getElementsByTagName("script"),t=n[n.length-1];if(t&&t.src)return t}};s=e.currentScript||t()||{}}(),function(){var n=function(n){return n.length?n.split("/"):[]},e=function(e){var t=n(e);return t.pop(),t.join("/")};l={split:n,dirname:e}}(),f=function(){var n=s.src;return n?l.dirname(n.replace(/\?.*$/,""))+"/":""},function(){var n,e=0,t=function(){var n=!1,e=this,t=r().thenSync(function(t){return t.call(e,n)});return n=!0,t},r=function(){if(!n){var e=new E({packaging:{requestConfig:{sync:!0},baseUrl:f()}});n=e.moduleExecute(e.getModule("noderError/error.js"))}return n},i=function(n,r,i){var o=++e,u=Error("NoderError #"+o+": "+n);return u.name="NoderError",u.id=o,u.code=n,u.args=r,u.cause=i,u.logDetails=t,u};d=i}(),function(){var e,t=n.XMLHttpRequest;t?e=function(){return new t}:(t=n.ActiveXObject,e=function(){return new t("Microsoft.XMLHTTP")});var r=function(n,e,t){return function(){if(e&&4==e.readyState){var r=200!=e.status;r?t.reject(d("XMLHttpRequest",[n,e])):t.resolve(e.responseText,e),n=e=t=null}}};h=function(n,t){t=t||{};var i=c(),o=e(),u=t.headers||{};for(var a in u)u.hasOwnProperty(a)&&o.setRequestHeader(a,u[a]);return o.open(t.method||"GET",n,!t.sync),o.onreadystatechange=r(n,o,i),o.send(t.data),i.promise()}}(),function(){var n,t=function(t,r){var i={};return t=r?["/*\n * File: ",r,"\n */\narguments[1].res=",t,"\n//",n?"#":"@"," sourceURL=",r].join(""):"arguments[1].res="+t,e(t,i),i.res};n=t("/*@cc_on!@*/0"),v=t}(),p=function(n,e,t){try{return v(n,e)}catch(r){throw d("jsEval",[n,e,t],r)}},function(){var n=r.isPlainObject;m=function(e,t,r){if(!e)return r;r=e["**"]||r;for(var i=0,o=t.length;o>i;i++){var u=t[i],a=e[u];if(!a)return e["*"]||e["**"]||r;if(!n(a))return a;r=e["**"]||r,e=a}return e["."]||e["*"]||e["**"]||r}}(),function(){var n=l.split,e={},t=function(n){var t=n.config.packaging||e;this.config=t,this.baseUrl=t.baseUrl||"",this.context=n,this.currentLoads={};var r=t.bootstrap;r&&r(n.define)},r=t.prototype={};r.moduleLoad=function(t){var r,i=t.filename,o=this.config.packagesMap;if(o){var u=n(i);r=m(o||e,u,null)}return r?this.loadPackaged(r):this.loadUnpackaged(t)},r.loadUnpackaged=function(n){var e=n.filename,t=this.baseUrl+e,r=this.context;return h(t,this.config.requestConfig).thenSync(function(n){r.jsModuleDefine(n,e,t)}).always(function(){r=null})},r.loadPackaged=function(n){var e=this,t=e.baseUrl+n,r=e.currentLoads[t];return r||(e.currentLoads[t]=r=h(t,e.config.requestConfig).thenSync(function(n){var r=e.jsPackageEval(n,t);r(e.context.define)}).always(function(){delete e.currentLoads[t],e=null})),r},r.jsPackageEval=function(n,e){var t=["(function(define){\n",n,"\n})"];return p(t.join(""),e,1)},g=t}(),function(){var n=r.isString,e=l.split,t={},i=function(n){var e=n.length-1,t=n[e];-1==t.indexOf(".")&&(n[e]=t+".js")},o=function(n){for(var e=0,t=n.length;t>e;e++){var r=n[e];r.length&&"."!=r?".."==r&&e>0&&".."!=n[e-1]&&(n.splice(e-1,2),e-=2,t-=2):(n.splice(e,1),e--,t--)}return n},u=function(n,t,r){var i=e(t);i[0].length?i.unshift(r,1):(i.shift(),i.unshift(0,r+1)),n.splice.apply(n,i)},a=function(e,t){for(var r=0,i=t.length;i>r;r++){var o=t[r];if(e=e[o],!e||o===e)return!1;if(n(e))return u(t,e,r),!0}return u(t,e["."]||"index.js",t.length),!0},c=function(n,e){var t={},r=".";o(e);for(var i=e.join("/");i!==r;){if(".."==e[0])throw d("resolverRoot",[e]);if(t[i])throw d("resolverLoop",[e]);t[i]=r,a(n,e)&&o(e),r=i,i=e.join("/")}},s=function(n){this.config=n.config.resolver||t,this.cache={}},f=s.prototype={};f.moduleResolve=function(n,r){var o=e(n.filename),u=this.config["default"]||t,a=e(r),s=a[0];return("."===s||".."===s)&&(o.pop(),a=o.concat(a)),c(u,a),i(a),a.join("/")},y=s}(),function(){var e,t=function(){var e=n.document;if(!e||"complete"===e.readyState)return c.done;var t=c(),r=function(){t&&t.resolve()};return e.addEventListener?(e.addEventListener("DOMContentLoaded",r),n.addEventListener("load",r),t.always(function(){e.removeEventListener("DOMContentLoaded",r),n.removeEventListener("load",r),e=null,r=null,t=null})):e.attachEvent&&(n.attachEvent("onload",r),t.always(function(){n.detachEvent("onload",r),e=null,r=null,t=null})),t.promise()};j=function(){return e||(e=t()),e}}(),function(){var e=function(n,e){return function(){return n.moduleExecute(e).end()}};x=function(t,r){return j().then(function(){var i=n.document,o=c.done;if(i){var a,s,l=i.getElementsByTagName("script");for(a=0,s=l.length;s>a;a++){var f=l[a];if(f.type===r){var d=f.getAttribute("data-filename");try{var h=t.jsModuleDefine(f.innerHTML,d);o=o.then(e(t,h))}catch(v){u(v)}}}}return o}).end()}}(),function(){var n=/(?=[\/'"]|\brequire\s*\()/,e=/^require\s*\(\s*$/,t=/[\r\n]/,r=/^['"]$/,i=/^(\w{2,}|[!%&\(*+,\-\/:;<=>?\[\^])$/,o=/^\s*(\S)/,u=/(\b(return|throw|new|in)|\S)\s*$/,a=function(n){for(var e=!1,t=n.length-1;t>=0&&"\\"==n.charAt(t);)t--,e=!e;return e},c=function(n,e){for(;e>=0;e--){var t=n[e];if(u.test(t))return RegExp.$1}return""},s=function(n,e){return 0===e||"."!=c(n,e-1)},l=function(n,e){return 0===e||i.test(c(n,e-1))},f=function(n,e){var t=n[e].charAt(0);e++;for(var r=n.length;r>e;e++){var i=n[e].charAt(0);if(i===t&&!a(n[e-1]))return e}throw Error("Unterminated string or regexp.")},d=function(n,e,t){return n.slice(e,t).join("").substring(1)},h=function(n,e){for(var r=e+1,i=n.length;i>r;r++){var o=n[r],u=o.search(t);if(u>-1)return n[r]=o.substring(u),n.splice(e,r-e),e}return r},v=function(n,e){var t=e+1;"/*"==n[e]&&t++;for(var r=n[t-1],i=n.length;i>t;t++){var o=r;if(r=n[t],"*"==o.charAt(o.length-1)&&"/"==r.charAt(0))return n.splice(e,t-e),n[e]=r.substring(1),e}return t};w=function(t){for(var i,u,a=[],c=0,p=t.split(n),m=-1,g=p.length;g>c&&c>=0;c++){var y=p[c],j=y.charAt(0);"/"==j?"/"==y&&g>c+1&&"/"==p[c+1].charAt(0)?(c=h(p,c),g=p.length):"*"==y.charAt(1)?(c=v(p,c),g=p.length):l(p,c)&&(c=f(p,c)):r.test(j)?(i=c,c=f(p,c),2==m&&(m=3,u=c)):"r"==j&&e.test(y)&&s(p,c)&&(m=1),m>0&&(1==m?m=2:(y=p[c],3==m&&(y=y.substring(1),m=4),o.test(y)&&(4==m&&")"==RegExp.$1&&a.push(d(p,i,u)),m=0)))}return a}}(),function(){var e=l.dirname,t=function(n,e){return function(){return n.apply(e,arguments)}},i=function(n,e,t){return function(r){return n.call(e,t,r)}},o=function(n,t){this.dirname=t?e(t):t=".",this._noder={},this.filename=t,this.id=t,this.require=i(n.moduleRequire,n,this),this.require.resolve=i(n.moduleResolve,n,this),this.require.cache=n.cache,this.parent=null,this.children=[],this.preloaded=!1,this.loaded=!1,this.exports={}},u=function(n,e){return n._noder[e]},a=function(n,e,t){return n._noder[e]=t,t},s=function(n){var e=n.config,t=c.done,r=e.main;t=t.thenSync(r?function(){return n.execModuleCall(r)}:c.empty),t=t.thenSync(e.onstart),"scriptsType"in e||(e.scriptsType=e.varName);var i=e.scriptsType;return i&&(t=t.thenSync(function(){return x(n,i)})),t.always(function(){n=null,e=null,t=null})},f=function(e){e=e||{},this.config=e,this.cache={};var r=new o(this);r.preloaded=!0,r.loaded=!0,r.define=this.define=t(this.define,this),r.asyncRequire=i(this.moduleAsyncRequire,this,r),r.execute=t(this.jsModuleExecute,this),r.createContext=f.createContext,this.rootModule=r,this.resolver=new y(this),this.loader=new g(this);var u=e.varName;u&&(n[u]=r),s(this).end()},h=f.prototype={},v=function(n,e){if(e===n)return!0;var t=u(e,5);if(t)for(var r=0;t[r];r++)if(v(n,t[r]))return!0;return!1};h.modulePreload=function(n,e){if(n.preloaded)return c.done;var t=u(n,3),r=u(n,5);if(t||r){if(e){if(v(n,e))return c.done;r.push(e)}if(!t)throw d("modulePreloadRec",[n]);return t}var i=this;return e&&"."!=e.id?(n.parent=e,n.require.main=e.require.main,e.children.push(n)):n.require.main=n,a(n,5,e?[e]:[]),a(n,3,i.moduleLoadDefinition(n).thenSync(function(){return i.modulePreloadDependencies(n,u(n,1))}).thenSync(function(){n.preloaded=!0,a(n,3,!1),a(n,5,null)},function(e){throw d("modulePreload",[n],e)}).always(function(){n=null,i=null,e=null}))},h.moduleLoadDefinition=function(n){if(u(n,0))return c.done;var e=u(n,4);if(!e){var t=n.filename;if(this.builtinModules.hasOwnProperty(t))this.moduleDefine(n,[],this.builtinModules[t](this)),e=c.done;else{var r=!0,i=function(e){if(!u(n,0))throw d("moduleLoadDefinition",[n],e);r=!1};e=this.loader.moduleLoad(n).thenSync(i,i),r&&a(n,4,e)}}return e},h.modulePreloadDependencies=function(n,e){for(var t=[],r=0,i=e.length;i>r;r++)t.push(this.modulePreload(this.getModule(this.moduleResolve(n,e[r])),n));return c.when(t)},h.moduleExecuteSync=function(e){if(e.loaded||u(e,2))return e.exports;if("resolved"!=this.modulePreload(e).state())throw d("notPreloaded",[e]);var t=e.exports;a(e,2,!0);try{return u(e,0).call(t,e,n),a(e,0,null),a(e,1,null),e.loaded=!0,e.exports}finally{a(e,2,!1)}},h.moduleResolve=function(n,e){return this.resolver.moduleResolve(n,e)},h.moduleRequire=function(n,e){return this.moduleExecuteSync(this.getModule(this.moduleResolve(n,e)))},h.getModule=function(n){if(!n)return new o(this);var e=this.cache[n];return e||(this.cache[n]=e=new o(this,n)),e},h.define=function(n,e,t){this.moduleDefine(this.getModule(n),e,t)},h.moduleDefine=function(n,e,t){return u(n,0)||(a(n,0,t),a(n,1,e),a(n,4,!1)),n},h.moduleExecute=function(n){var e=this;return e.modulePreload(n).thenSync(function(){return e.moduleExecuteSync(n)}).always(function(){e=null,n=null})},h.moduleAsyncRequire=function(n,e){return r.isArray(e)?this.modulePreloadDependencies(n,e):this.moduleRequire(n,e)},h.jsModuleDefine=function(n,e,t,r){var i=w(n),o=this.jsModuleEval(n,t||e,r);return this.moduleDefine(this.getModule(e),i,o)},h.jsModuleExecute=function(n,e,t){return this.moduleExecute(this.jsModuleDefine(n,e,t))},h.jsModuleEval=function(n,e,t){var r=["(function(module, global){\nvar require = module.require, exports = module.exports, __filename = module.filename, __dirname = module.dirname;\n\n",n,"\n\n})"];return p(r.join(""),e,(t||0)+3)},h.execModuleCall=function(n){return this.moduleExecute(this.getModule(this.moduleResolve(this.rootModule,n)))},h.builtinModules={"noder-js/asyncRequire.js":function(n){return function(e){e.exports={create:function(e){return function(t){return n.moduleAsyncRequire(e,t)}}}}},"noder-js/currentContext.js":function(n){return function(e){e.exports=n}}},h.Context=f,f.createContext=function(n){return new f(n).rootModule},f.expose=function(n,e){var t=function(n){n.exports=e};h.builtinModules[n]=function(){return t}},E=f}(),M=t,function(){var n={},e=s.innerHTML;/^\s*$/.test(e||"")||(n=v(e)||n);var t=s.src;if(!n.main&&t){var r=t.indexOf("?");r>-1&&(n.main=decodeURIComponent(t.substring(r+1)))}b=n}(),function(){var n=M();i(n,b,!0),S=n}(),E.expose("noder-js/promise.js",c),E.expose("noder-js/context.js",E),E.expose("noder-js/findRequires.js",w),E.expose("noder-js/jsEval.js",p),E.expose("noder-js/request.js",h),E.expose("noder-js/asyncCall.js",a),q=E.createContext(S)})(function(){return this}(),function(c){eval(c)},function(){return{varName:"noder",resolver:{"default":{}},packaging:{packagesMap:{}}}});