/*
 * Noder 1.0.0-SNAPSHOT - 30 Nov 2012
 * https://github.com/ariatemplates/noder
 * Copyright 2009-2012 Amadeus s.a.s.
 * Licensed under the Apache License, Version 2.0.
 */
(function(e,t){"use strict";var n,r;return function(){var e={},t={};n=function(n){var r=t[n];if(!r){r=e[n];if(!r)throw new Error("Missing internal module: "+n);var i={exports:{}};r(i),r=t[n]=i.exports,e[n]=null}return r},r=function(t,n){e[t]=n}}(),r(1,function(e){var t=n(2);e.exports=n(3).config({varName:"noder"}).config(t)}),r(2,function(t){var r=e.document,i={};if(r.readyState=="loading"){var s=r.getElementsByTagName("script"),o=s[s.length-1];if(o){var u=o.src;if(u){var a=n(4),f=o.innerHTML;/^\s*$/.test(f)||(i=a(f)||i);if(!i.main){var l=u.indexOf("?");l>-1&&(i.main=decodeURIComponent(u.substring(l+1)))}}}}t.exports=i}),r(3,function(e){var t=n(5),r=n(6),i=function(e){this._cfg=e},s=i.prototype={};s.config=function(e){return new i(r([e,this._cfg]))};var o=function(e){var t=new i(e);return e?t.create():t};s.create=function(){var e=new t(this._cfg),n=e.rootModule;return n.createContext=o,n},e.exports=o()}),r(4,function(e){var n=!0;e.exports=function(e,r){var i={};return r&&n?e=["/*\n * File: ",r,"\n */\narguments[1].res=",e,"\n//@ sourceURL=",r].join(""):e="arguments[1].res="+e,t(e,i),i.res}}),r(5,function(t){function d(e,t){t?this.dirname=c(t):(t=".",this.dirname=t),this.filename=t,this.id=t,this.require=p(e.require,e,this),this.require.resolve=p(e.resolve,e,this),this.require.cache=e.cache,this.parent=null,this.children=[]}var r=n(7),i=n(8),s=n(9),o=n(10),u=n(11),a=n(12),f=n(13),l=n(14).isArray,c=n(15).dirname,h=function(e,t){return function(){return e.apply(t,arguments)}},p=function(e,t,n){return function(r){return e.call(t,n,r)}},v=d.prototype={};v.preloading=!1,v.preloaded=!1,v.loadingDefinition=!1,v.definition=null,v.executing=!1,v.loaded=!1,t.exports=d;var m=function(e){return function(t){t.exports={create:function(t){return function(n){return e.asyncRequire(t,n)}}}}},g=function(e){var t=e.config,n=r.done;t.hasOwnProperty("scriptsType")||(t.scriptsType=t.varName);var i=t.scriptsType;i&&(n=n.then(function(){return f(e,i)}));var s=t.main;return n=n.then(s?function(){return u(e,s)}:r.empty),n=n.then(t.onstart),n.always(function(){e=null,t=null,n=null})},y=function(t){this.cache={};var n=h(this.define,this);this.define=n,n("asyncRequire.js",[],m(this)),t=t||{},this.config=t,this.resolver=new a(t.resolver),this.packaging=new i(t.packaging,this.define);var r=new d(this);r.preloaded=!0,r.loaded=!0,r.define=n,r.asyncRequire=r.require("asyncRequire").create(r),this.rootModule=r;var s=t.varName;s&&(e[s]=r),g(this).end()},b=y.prototype={};b.preloadModule=function(e,t){if(e.preloaded)return r.done;if(e.preloading){while(t){if(t===e)return r.done;t=t.parent}return e.preloading}var n=this;return t&&t.id!="."?(e.parent=t,e.require.main=t.require.main,t.children.push(e)):e.require.main=e,e.preloading=n.loadDefinition(e).then(function(){return n.preloadModules(e,e.definition.dependencies)}).then(function(){e.preloaded=!0,e.preloading=!1}).always(function(){e=null,n=null})},b.loadDefinition=function(e){if(e.definition)return r.done;var t=e.loadingDefinition;return t||(e.loadingDefinition=t=r(),this.packaging.loadModule(e.filename).then(function(){t&&t.reject(new Error("Module "+e.filename+" was not found in expected package."))},t.reject),t.done(function(){t=null,e.loadingDefinition=!1})),t},b.preloadModules=function(e,t){var n=[];for(var i=0,s=t.length;i<s;i++)n.push(this.preloadModule(this.getModule(this.resolve(e,t[i])),e));return r.when(n)},b.executePreloadedModule=function(t){if(t.loaded||t.executing)return t.exports;if(!t.preloaded)throw new Error("A module must be preloaded before executing it.");var n={};t.exports=n,t.executing=!0;try{return t.definition.body.call(n,t,e),t.loaded=!0,t.exports}finally{t.executing=!1}},b.require=function(e,t){var n=this.resolve(e,t),r=this.cache[n];if(r)return this.executePreloadedModule(r);throw new Error(["Module ",t," (",n,") is not loaded."].join(""))},b.resolve=function(e,t){return this.resolver.resolve(e.filename,t)},b.getModule=function(e){if(!e)return new d(this);var t=this.cache[e];return t||(this.cache[e]=t=new d(this,e)),t},b.define=function(e,t,n){this.defineModule(this.getModule(e),t,n)},b.defineModule=function(e,t,n){if(!e.definition){var r={dependencies:t,body:n};e.definition=r,t.length||(e.preloaded=!0);var i=e.loadingDefinition;i&&(i.isPending()?i.resolve():e.loadingDefinition=!1)}return e},b.executeModule=function(e){var t=this;return t.preloadModule(e).then(function(){return t.executePreloadedModule(e)}).always(function(){t=null,e=null})},b.execute=function(e,t){var n=this.getModule(t);return this.defineModule(n,s(e),o(e)),this.executeModule(n)},b.asyncRequire=function(e,t){return l(t)?this.preloadModules(e,t):this.require(e,t)},b.Context=y,t.exports=y}),r(6,function(e){var t,r=n(14),i=r.isPlainObject,s=function(e,n,r,s){var o=[],u=0;for(var a=r;a<s;a++){var f=e[a];if(i(f)){var l=f[n];if(l!=t){o[u]=l;if(u===0&&!i(l))break;u++}}}return o},o=function(e){var n=e.length;if(n===0)return t;if(n==1)return e[0];var r;for(var u=0;u<n;u++){var a=e[u];if(a!=t)if(i(a)){r||(r={});for(var f in a)a.hasOwnProperty(f)&&!r.hasOwnProperty(f)&&(r[f]=o(s(e,f,u,n)))}else if(!r)return a}return r};e.exports=o}),r(7,function(e){var t=n(16),r=n(14).isFunction,i=n(17),s=Array.prototype.concat,o="pending",u=function(e,t){return function(){try{var n=e.apply(null,arguments);n&&r(n.then)?n.then(t.resolve,t.reject):t.resolve(n)}catch(i){t.reject(i)}finally{e=null,t=null}}},a=function(e){throw e},f=function(e){var n={},l=o,c=null,h={},p=function(e){var t=function(){var t;return l===o?(t=h[e]||[],h[e]=s.apply(t,arguments)):l===e&&(t=s.apply([],arguments),i(t,c)),this},n=function(){if(l!==o)return;c=arguments,l=e;var t=h[e];h=null,i(t,c)};return[t,n]},d=p("resolved"),v=p("rejected"),m={state:function(){return l},isPending:function(){return l==o},always:function(){return n.done.apply(n,arguments).fail.apply(n,arguments),this},done:d[0],fail:v[0],then:function(e,t){var i=f();return n.done(r(e)?u(e,i):i.resolve),n.fail(r(t)?u(t,i):i.reject),i.promise()},promise:function(e){return e?t(e,m):m},end:function(){n.fail(a)}};return n.resolve=d[1],n.reject=v[1],m.promise(n),e&&e.call(n,n),n},l=f();l.resolve(),f.done=l,f.empty=function(){},f.noop=function(){return l};var c=function(e,t){return e.counter++,function(){if(!e)return;var n=e.array;n[t]=arguments,e.counter--;if(!e.counter){var r=e.promise;e.array=null,e.promise=null,r.resolve.apply(r,n)}e=null}};f.when=function(){var e=s.apply([],arguments),t=f(),n,i;for(var o=0,u=e.length;o<u;o++){var a=e[o];a&&r(a.then)&&(n||(n={promise:t,counter:0,array:e},i=t.reject),a.then(c(n,o),i))}return n||t.resolve.apply(t,e),t.promise()},e.exports=f}),r(8,function(e){var t=n(18),r=n(9),i=n(10),s=n(19),o=n(20),u=n(15).split,a={},f=function(e,t){e=e||a,this.config=e,this.define=t,this.currentLoads={};var n=e.bootstrap;n&&n(t)},l=f.prototype={};l.loadModule=function(e){var t,n=this.config.packagesMap;if(n){var r=u(e);t=o(n||a,r,null)}return t?this.loadPackaged(t):this.loadUnpackaged(e)},l.loadUnpackaged=function(e){var n=(this.config.baseUrl||"")+e,s=this.define;return t(n).then(function(t){var o=r(t),u=i(t,n);s(e,o,u)}).always(function(){s=null})},l.loadPackaged=function(e){var n=this,r=(n.config.baseUrl||"")+e,i=n.currentLoads[r];return i||(n.currentLoads[r]=i=t(r).then(function(e){var t=s(e,r);t(n.define)}).always(function(){delete n.currentLoads[r],n=null})),i},e.exports=f}),r(9,function(e){var t=/(?=[\/'"]|\brequire\s*\()/,n=/^require\s*\(\s*$/,r=/[\r\n]/,i=/^['"]$/,s=/^[!%&\(*+,\-\/:;<=>?\[\^]$/,o=/\S\s*$/,u=function(e){var t=!1,n=e.length-1;while(n>=0&&e.charAt(n)=="\\")n--,t=!t;return t},a=function(e,t){for(;t>=0;t--){var n=e[t],r=n.search(o);if(r>-1)return n.charAt(r)}return""},f=function(e,t){return t===0||a(e,t-1)!="."},l=function(e,t){return t===0||s.test(a(e,t-1))},c=function(e,t){var n=e[t].charAt(0);t++;for(var r=e.length;t<r;t++){var i=e[t].charAt(0);if(i===n&&!u(e[t-1]))return t}throw new Error("Unterminated string or regexp.")},h=function(e,t,n){return e.slice(t,n).join("").substring(1)},p=function(e,t){for(var n=t+1,i=e.length;n<i;n++){var s=e[n],o=s.search(r);if(o>-1)return e[n]=s.substring(o),e.splice(t,n-t),t}return n},d=function(e,t){var n=t+1;e[t]=="/*"&&n++;for(var r=e.length;n<r;n++){var i=e[n-1];if(i.charAt(i.length-1)=="*"&&e[n].charAt(0)=="/")return e.splice(t,n+1-t),t-1}return n};e.exports=function(e){var r=[],s=0,o=e.split(t);for(var u=o.length;s<u&&s>=0;s++){var a=o[s],v=a.charAt(0);if(v=="/")a=="/"&&s+1<u&&o[s+1].charAt(0)=="/"?(s=p(o,s),u=o.length):a.charAt(1)=="*"?(s=d(o,s),u=o.length):l(o,s)&&(s=c(o,s));else if(i.test(v))s=c(o,s);else if(v=="r"&&n.test(a)&&s+2<u&&f(o,s)){var m=s+1;i.test(o[m].charAt(0))&&(s=c(o,m),r.push(h(o,m,s)))}}return r}}),r(10,function(e){var t=n(4);e.exports=function(e,n){var r=["(function(module, global){\nvar require = module.require, exports = module.exports, __filename = module.filename, __dirname = module.dirname;\n\n",e,"\n\n})"];return t(r.join(""),n)}}),r(11,function(e){e.exports=function(e,t){var n=t.indexOf("(");if(n>-1){var r=t.lastIndexOf("/",n);if(r<0)throw new Error("Invalid module call: "+t);var i=t.substring(r+1);return t=t.substring(0,r),e.execute(['module.exports = require("',t,'");\nmodule.exports.',i].join(""))}return t=e.rootModule.require.resolve(t),e.executeModule(e.getModule(t))}}),r(12,function(e){var t=n(15),r=n(14).isString,i=n(20),s=t.split,o=n(6),u={},a=function(e){var t=e.length-1,n=e[t];n.indexOf(".")==-1&&(e[t]=n+".js")},f=function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];!r.length||r=="."?(e.splice(t,1),t--,n--):r==".."&&t>0&&e[t-1]!=".."&&(e.splice(t-1,2),t-=2,n-=2)}return e},l=function(e,t,n){var r=s(t);r[0].length?r.unshift(n,1):(r.shift(),r.unshift(0,n+1)),e.splice.apply(e,r)},c=function(e,t){for(var n=0,i=t.length;n<i;n++){var s=t[n];e=e[s];if(!e||s===e)return!1;if(r(e))return l(t,e,n),!0}return l(t,e["."]||"index.js",t.length),!0},h=function(e,t){var n={},r=".";f(t);var i=t.join("/");while(i!==r){if(t[0]=="..")throw new Error("Trying to go upper than the root of modules.");if(n[i])throw new Error("Infinite loop in configuration.");n[i]=r,c(e,t)&&f(t),r=i,i=t.join("/")}},p=function(e){this.config=e||u,this.cache={}},d=p.prototype={};d.resolve=function(e,t){var n=s(e),r=i(this.config.activations||u,n,""),o=this.computeMap(r),f=s(t),l=f[0];if(l==="."||l==="..")n.pop(),f=n.concat(f);return h(o,f),a(f),f.join("/")},d.computeMap=function(e){var t=this.cache,n=t[e];if(!n){var r=this.config,i=r.profiles,s=[];if(e.length){var a=e.split(",");for(var f=0,l=a.length;f<l;f++)s[f]=i[a[f]]}s.push(r["default"]||u),n=o(s),t[e]=n}return n},e.exports=p}),r(13,function(t){var r=n(7),i=n(21);t.exports=function(t,n){return i().then(function(){var i=e.document.getElementsByTagName("script"),s=[];for(var o=0,u=i.length;o<u;o++){var a=i[o];if(a.type===n){var f=a.getAttribute("data-filename");s.push(t.execute(a.innerHTML,f))}}return r.when(s)})}}),r(14,function(e){var t=Object.prototype.toString,n=function(e){return typeof e=="string"||t.call(e)==="[object String]"},r=Array.isArray||function(e){return t.call(e)==="[object Array]"},i=function(e){return typeof e=="function"},s=function(e){return e?t.call(e)==="[object Object]":!1};e.exports={isFunction:i,isArray:r,isString:n,isPlainObject:s}}),r(15,function(e){var t=/\//,n=function(e){return e.length?e.split(t):[]},r=function(e){var t=n(e);return t.pop(),t.join("/")};e.exports={split:n,dirname:r}}),r(16,function(e){e.exports=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}}),r(17,function(e){var t=n(22);e.exports=function(e,n){e&&e.length&&t(function(){for(var t=0,r=e.length;t<r;t++){var i=e[t];i.apply(null,n)}e=null,n=null})}}),r(18,function(t){var r=n(7),i=e.XMLHttpRequest,s;i?s=function(){return new i}:(i=e.ActiveXObject,s=function(){return new i("Microsoft.XMLHTTP")});var o=function(e,t,n){return function(){if(t&&t.readyState==4){var r=t.status!=200;r?n.reject(new Error(["Error while fetching ",e,"\n",t.status," ",t.statusText].join(""))):n.resolve(t.responseText),e=t=n=null}}};t.exports=function(e){var t=r(),n=s();return n.open("GET",e,!0),n.onreadystatechange=o(e,n,t),n.send(null),t.promise()}}),r(19,function(e){var t=n(4);e.exports=function(e,n){var r=["(function(define){\n",e,"\n})"];return t(r.join(""),n)}}),r(20,function(e){var t=n(14).isPlainObject;e.exports=function(e,n,r){if(!e)return r;r=e["**"]||r;for(var i=0,s=n.length;i<s;i++){var o=n[i],u=e[o];if(!u)return e["*"]||e["**"]||r;if(!t(u))return u;r=e["**"]||r,e=u}return e["."]||e["*"]||e["**"]||r}}),r(21,function(t){var r=n(7),i,s=function(){var t=e.document;if(t&&t.readyState==="complete")return r.done;var n=r();if(!t)n.reject(new Error("No document."));else{var i=function(){n&&n.resolve()};t.addEventListener?(t.addEventListener("DOMContentLoaded",i),e.addEventListener("load",i),n.always(function(){t.removeEventListener("DOMContentLoaded",i),e.removeEventListener("load",i),t=null,i=null,n=null})):t.attachEvent&&(e.attachEvent("onload",i),n.always(function(){e.detachEvent("onload",i),t=null,i=null,n=null}))}return n.promise()};t.exports=function(){return i||(i=s()),i}}),r(22,function(t){var n=e.setTimeout;t.exports=function(e){n(e,0)}}),n(1)})(function(){return this}(),function(c){eval(c)}).create();